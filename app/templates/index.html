{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cadastro - Minha Loja</title>
  <link rel="stylesheet" href="{% static 'css/style.css' %}">
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Inter', sans-serif;
    }

    body {
      background: #f8fafc;
      margin: 0;
      padding: 40px;
      color: #111;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    h2 {
      margin-bottom: 30px;
    }

    .tabs {
      display: flex;
      background: #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 30px;
      width: 320px;
    }

    .tab-btn {
      flex: 1;
      padding: 12px;
      background: transparent;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.2s;
    }

    .tab-btn.active {
      background: #16a34a;
      color: #fff;
    }

    .form-box {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 450px;
      display: none;
      animation: fade 0.3s ease-in-out;
      max-height: 90vh;
      overflow-y: auto;
    }

    .form-box.active {
      display: block;
    }

    @keyframes fade {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .form-group {
      margin-top: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }

    input {
      width: 100%;
      padding: 10px;
      border: 2px solid #cbd5e1;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    input:focus {
      border-color: #16a34a;
      outline: none;
      box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
    }

    input.valid {
      border-color: #16a34a;
      background-color: #f0fdf4;
    }

    input.invalid {
      border-color: #ef4444;
      background-color: #fef2f2;
    }

    .optional {
      font-size: 0.85em;
      color: #64748b;
    }

    .error-message {
      color: #ef4444;
      font-size: 0.8em;
      margin-top: 3px;
      display: none;
    }

    .error-message.show {
      display: block;
    }

    .success-message {
      color: #16a34a;
      font-size: 0.8em;
      margin-top: 3px;
      display: none;
    }

    .success-message.show {
      display: block;
    }

    .submit-btn {
      background-color: #16a34a;
      color: #fff;
      border: none;
      padding: 12px 20px;
      border-radius: 8px;
      width: 100%;
      font-size: 16px;
      font-weight: 600;
      margin-top: 20px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .submit-btn:hover:not(:disabled) {
      background-color: #15803d;
    }

    .submit-btn:disabled {
      background-color: #cbd5e1;
      cursor: not-allowed;
    }

    .loading-indicator {
      font-size: 0.8em;
      color: #6b7280;
      margin-top: 3px;
      display: none;
    }

    .loading-indicator.show {
      display: block;
    }
  </style>
</head>
<body>
  <h2>Crie sua Conta</h2>

  <!-- Exibir Mensagens de Erro/Sucesso -->
  {% if messages %}
  <div style="width: 450px; margin-bottom: 20px;">
    {% for message in messages %}
    <div style="
      padding: 12px 15px;
      margin-bottom: 8px;
      border-radius: 8px;
      {% if message.tags == 'error' %}
        background-color: #fee2e2;
        border: 1px solid #ef4444;
        color: #991b1b;
      {% else %}
        background-color: #dcfce7;
        border: 1px solid #16a34a;
        color: #166534;
      {% endif %}
    ">
      {% if message.tags == 'error' %}‚ùå {% else %}‚úì {% endif %}{{ message }}
    </div>
    {% endfor %}
  </div>
  {% endif %}

  <div class="tabs">
    <button class="tab-btn {% if tipo_selecionado == 'pj' %}{% else %}active{% endif %}" id="btnFisica">Pessoa F√≠sica</button>
    <button class="tab-btn {% if tipo_selecionado == 'pj' %}active{% endif %}" id="btnJuridica">Pessoa Jur√≠dica</button>
  </div>

  <!-- Formul√°rio Pessoa F√≠sica -->
  <form method="post" action="{% url 'cadastrar_usuario' %}" class="form-box {% if tipo_selecionado != 'pj' %}active{% endif %}" id="formFisica">
    {% csrf_token %}
    <input type="hidden" name="tipo_cliente" value="PF">

    <div class="form-group">
      <label>CPF <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cpf" id="cpfFisica" maxlength="14" placeholder="000.000.000-00" value="{{ form_data.cpf }}" required>
      <div class="error-message" id="cpfFisicaError"></div>
      <div class="success-message" id="cpfFisicaSuccess">‚úì CPF v√°lido</div>
    </div>

    <div class="form-group">
      <label>Nome Completo <span style="color: #ef4444;">*</span></label>
      <input type="text" name="nome" id="nomeFisica" maxlength="150" placeholder="Digite seu nome completo" value="{{ form_data.nome }}" required>
      <div class="error-message" id="nomeFisicaError"></div>
    </div>

    <div class="form-group">
      <label>Data de Nascimento <span style="color: #ef4444;">*</span></label>
      <input type="date" name="data_nascimento" id="dataNascimentoFisica" value="{{ form_data.data_nascimento }}" required>
      <div class="error-message" id="dataNascimentoFisicaError"></div>
    </div>

    <div class="form-group">
      <label>RG <span class="optional">(opcional)</span></label>
      <input type="text" name="rg" id="rgFisica" maxlength="20" value="{{ form_data.rg }}">
    </div>

    <div class="form-group">
      <label>CEP <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cep" id="cepFisica" maxlength="9" placeholder="00000-000" value="{{ form_data.cep }}" required>
      <div class="loading-indicator" id="cepFisicaLoading">üîÑ Buscando CEP...</div>
      <div class="error-message" id="cepFisicaError"></div>
      <div class="success-message" id="cepFisicaSuccess">‚úì CEP encontrado</div>
    </div>

    <div class="form-group">
      <label>Logradouro <span style="color: #ef4444;">*</span></label>
      <input type="text" name="logradouro" id="logradouroFisica" maxlength="150" value="{{ form_data.logradouro }}" required>
      <div class="error-message" id="logradouroFisicaError"></div>
    </div>

    <div class="form-group">
      <label>N√∫mero <span style="color: #ef4444;">*</span></label>
      <input type="text" name="numero" id="numeroFisica" maxlength="10" value="{{ form_data.numero }}" required>
      <div class="error-message" id="numeroFisicaError"></div>
    </div>

    <div class="form-group">
      <label>Complemento <span class="optional">(opcional)</span></label>
      <input type="text" name="complemento" id="complementoFisica" maxlength="50" value="{{ form_data.complemento }}">
    </div>

    <div class="form-group">
      <label>Bairro <span style="color: #ef4444;">*</span></label>
      <input type="text" name="bairro" id="bairroFisica" maxlength="80" value="{{ form_data.bairro }}" required>
      <div class="error-message" id="bairroFisicaError"></div>
    </div>

    <div class="form-group">
      <label>Cidade <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cidade" id="cidadeFisica" maxlength="100" value="{{ form_data.cidade }}" required>
      <div class="error-message" id="cidadeFisicaError"></div>
    </div>

    <div class="form-group">
      <label>Estado <span style="color: #ef4444;">*</span></label>
      <input type="text" name="estado" id="estadoFisica" maxlength="2" value="{{ form_data.estado }}" required>
      <div class="error-message" id="estadoFisicaError"></div>
    </div>

    <div class="form-group">
      <label>Pa√≠s <span style="color: #ef4444;">*</span></label>
      <input type="text" name="pais" id="paisFisica" maxlength="50" value="{{ form_data.pais|default:'Brasil' }}" required>
    </div>

    <div class="form-group">
      <label>Email <span style="color: #ef4444;">*</span></label>
      <input type="email" name="email" id="emailFisica" placeholder="seuemail@exemplo.com" value="{{ form_data.email }}" required>
      <div class="error-message" id="emailFisicaError"></div>
      <div class="success-message" id="emailFisicaSuccess">‚úì Email v√°lido</div>
    </div>

    <div class="form-group">
      <label>Telefone Principal <span style="color: #ef4444;">*</span></label>
      <input type="text" name="telefone_principal" id="telefonePrincipalFisica" maxlength="15" placeholder="(00) 00000-0000" value="{{ form_data.telefone_principal }}" required>
      <div class="error-message" id="telefonePrincipalFisicaError"></div>
      <div class="success-message" id="telefonePrincipalFisicaSuccess">‚úì Telefone v√°lido</div>
    </div>

    <div class="form-group">
      <label>Telefone Secund√°rio <span class="optional">(opcional)</span></label>
      <input type="text" name="telefone_secundario" id="telefoneSecundarioFisica" maxlength="15" placeholder="(00) 00000-0000" value="{{ form_data.telefone_secundario }}">
      <div class="error-message" id="telefoneSecundarioFisicaError"></div>
    </div>

    <button type="submit" class="submit-btn" id="submitBtnFisica">Finalizar Cadastro</button>
  </form>

  <!-- Formul√°rio Pessoa Jur√≠dica -->
  <form method="post" action="{% url 'cadastrar_usuario' %}" class="form-box {% if tipo_selecionado == 'pj' %}active{% endif %}" id="formJuridica">
    {% csrf_token %}
    <input type="hidden" name="tipo_cliente" value="PJ">

    <div class="form-group">
      <label>CNPJ <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cnpj" id="cnpjJuridica" maxlength="18" placeholder="00.000.000/0000-00" value="{{ form_data.cnpj }}" required>
      <div class="error-message" id="cnpjJuridicaError"></div>
      <div class="success-message" id="cnpjJuridicaSuccess">‚úì CNPJ v√°lido</div>
    </div>

    <div class="form-group">
      <label>Raz√£o Social <span style="color: #ef4444;">*</span></label>
      <input type="text" name="razao_social" id="razaoSocialJuridica" maxlength="150" value="{{ form_data.razao_social }}" required>
      <div class="error-message" id="razaoSocialJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Nome de Fantasia <span class="optional">(opcional)</span></label>
      <input type="text" name="nome_fantasia" id="nomeFantasiaJuridica" maxlength="150" value="{{ form_data.nome_fantasia }}">
    </div>

    <div class="form-group">
      <label>Data de Abertura <span style="color: #ef4444;">*</span></label>
      <input type="date" name="data_abertura" id="dataAberturaJuridica" value="{{ form_data.data_abertura }}" required>
      <div class="error-message" id="dataAberturaJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Inscri√ß√£o Estadual <span class="optional">(opcional)</span></label>
      <input type="text" name="inscricao_estadual" id="inscricaoEstadualJuridica" maxlength="20" value="{{ form_data.inscricao_estadual }}">
    </div>

    <div class="form-group">
      <label>CEP <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cep" id="cepJuridica" maxlength="9" placeholder="00000-000" value="{{ form_data.cep }}" required>
      <div class="loading-indicator" id="cepJuridicaLoading">üîÑ Buscando CEP...</div>
      <div class="error-message" id="cepJuridicaError"></div>
      <div class="success-message" id="cepJuridicaSuccess">‚úì CEP encontrado</div>
    </div>

    <div class="form-group">
      <label>Logradouro <span style="color: #ef4444;">*</span></label>
      <input type="text" name="logradouro" id="logradouroJuridica" maxlength="150" value="{{ form_data.logradouro }}" required>
      <div class="error-message" id="logradouroJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>N√∫mero <span style="color: #ef4444;">*</span></label>
      <input type="text" name="numero" id="numeroJuridica" maxlength="10" value="{{ form_data.numero }}" required>
      <div class="error-message" id="numeroJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Complemento <span class="optional">(opcional)</span></label>
      <input type="text" name="complemento" id="complementoJuridica" maxlength="50" value="{{ form_data.complemento }}">
    </div>

    <div class="form-group">
      <label>Bairro <span style="color: #ef4444;">*</span></label>
      <input type="text" name="bairro" id="bairroJuridica" maxlength="80" value="{{ form_data.bairro }}" required>
      <div class="error-message" id="bairroJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Cidade <span style="color: #ef4444;">*</span></label>
      <input type="text" name="cidade" id="cidadeJuridica" maxlength="100" value="{{ form_data.cidade }}" required>
      <div class="error-message" id="cidadeJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Estado <span style="color: #ef4444;">*</span></label>
      <input type="text" name="estado" id="estadoJuridica" maxlength="2" value="{{ form_data.estado }}" required>
      <div class="error-message" id="estadoJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Pa√≠s <span style="color: #ef4444;">*</span></label>
      <input type="text" name="pais" id="paisJuridica" maxlength="50" value="{{ form_data.pais|default:'Brasil' }}" required>
    </div>

    <div class="form-group">
      <label>Email <span style="color: #ef4444;">*</span></label>
      <input type="email" name="email" id="emailJuridica" placeholder="contato@empresa.com" value="{{ form_data.email }}" required>
      <div class="error-message" id="emailJuridicaError"></div>
      <div class="success-message" id="emailJuridicaSuccess">‚úì Email v√°lido</div>
    </div>

    <div class="form-group">
      <label>Telefone Principal <span style="color: #ef4444;">*</span></label>
      <input type="text" name="telefone_principal" id="telefonePrincipalJuridica" maxlength="15" placeholder="(00) 00000-0000" value="{{ form_data.telefone_principal }}" required>
      <div class="error-message" id="telefonePrincipalJuridicaError"></div>
      <div class="success-message" id="telefonePrincipalJuridicaSuccess">‚úì Telefone v√°lido</div>
    </div>

    <div class="form-group">
      <label>Telefone Secund√°rio <span class="optional">(opcional)</span></label>
      <input type="text" name="telefone_secundario" id="telefoneSecundarioJuridica" maxlength="15" placeholder="(00) 00000-0000" value="{{ form_data.telefone_secundario }}">
      <div class="error-message" id="telefoneSecundarioJuridicaError"></div>
    </div>

    <div class="form-group">
      <label>Site Institucional <span class="optional">(opcional)</span></label>
      <input type="url" name="site" id="siteJuridica" placeholder="https://www.exemplo.com" value="{{ form_data.site }}">
      <div class="error-message" id="siteJuridicaError"></div>
    </div>

    <button type="submit" class="submit-btn" id="submitBtnJuridica">Finalizar Cadastro</button>
  </form>

  <script>
    // ==================== FUN√á√ïES DE M√ÅSCARA ====================
    function mascaraCPF(v) {
      v = v.replace(/\D/g, '');
      v = v.replace(/(\d{3})(\d)/, '$1.$2');
      v = v.replace(/(\d{3})(\d)/, '$1.$2');
      v = v.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
      return v;
    }

    function mascaraCNPJ(v) {
      v = v.replace(/\D/g, '');
      v = v.replace(/^(\d{2})(\d)/, '$1.$2');
      v = v.replace(/^(\d{2})\.(\d{3})(\d)/, '$1.$2.$3');
      v = v.replace(/\.(\d{3})(\d)/, '.$1/$2');
      v = v.replace(/(\d{4})(\d)/, '$1-$2');
      return v;
    }

    function mascaraCEP(v) {
      v = v.replace(/\D/g, '');
      v = v.replace(/(\d{5})(\d)/, '$1-$2');
      return v;
    }

    function mascaraTelefone(v) {
      v = v.replace(/\D/g, '');
      v = v.replace(/^(\d{2})(\d)/, '($1) $2');
      v = v.replace(/(\d{5})(\d)/, '$1-$2');
      return v;
    }

    // ==================== FUN√á√ïES DE VALIDA√á√ÉO ====================
    function validarCPF(cpf) {
      cpf = cpf.replace(/\D/g, '');
      if (cpf.length !== 11 || /^(\d)\1{10}$/.test(cpf)) return false;

      let soma = 0;
      let resto;

      for (let i = 1; i <= 9; i++) {
        soma += parseInt(cpf.substring(i - 1, i)) * (11 - i);
      }
      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.substring(9, 10))) return false;

      soma = 0;
      for (let i = 1; i <= 10; i++) {
        soma += parseInt(cpf.substring(i - 1, i)) * (12 - i);
      }
      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(cpf.substring(10, 11))) return false;

      return true;
    }

    function validarCNPJ(cnpj) {
      cnpj = cnpj.replace(/\D/g, '');
      if (cnpj.length !== 14 || /^(\d)\1{13}$/.test(cnpj)) return false;

      let tamanho = cnpj.length - 2;
      let numeros = cnpj.substring(0, tamanho);
      let digitos = cnpj.substring(tamanho);
      let soma = 0;
      let pos = 0;

      for (let i = tamanho - 1; i >= 0; i--) {
        pos++;
        soma += numeros.charAt(tamanho - pos) * (pos % 8 + 2);
      }

      let resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
      if (resultado !== parseInt(digitos.charAt(0))) return false;

      tamanho = tamanho + 1;
      numeros = cnpj.substring(0, tamanho);
      soma = 0;
      pos = 0;

      for (let i = tamanho - 1; i >= 0; i--) {
        pos++;
        soma += numeros.charAt(tamanho - pos) * (pos % 8 + 2);
      }

      resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
      if (resultado !== parseInt(digitos.charAt(1))) return false;

      return true;
    }

    function validarEmail(email) {
      const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return regex.test(email);
    }

    function validarTelefone(telefone) {
      const telefoneNumeros = telefone.replace(/\D/g, '');
      return telefoneNumeros.length >= 10 && telefoneNumeros.length <= 11;
    }

    function validarCEP(cep) {
      const cepNumeros = cep.replace(/\D/g, '');
      return cepNumeros.length === 8;
    }

    function validarData(data) {
      const dataObj = new Date(data);
      const dataAtual = new Date();
      return dataObj < dataAtual;
    }

    // ==================== FUN√á√ïES DE FEEDBACK ====================
    function mostrarErro(inputId, mensagem) {
      const input = document.getElementById(inputId);
      const errorDiv = document.getElementById(inputId + 'Error');
      
      input.classList.add('invalid');
      input.classList.remove('valid');
      errorDiv.textContent = mensagem;
      errorDiv.classList.add('show');

      const successDiv = document.getElementById(inputId + 'Success');
      if (successDiv) successDiv.classList.remove('show');
    }

    function mostrarSucesso(inputId) {
      const input = document.getElementById(inputId);
      const errorDiv = document.getElementById(inputId + 'Error');
      const successDiv = document.getElementById(inputId + 'Success');
      
      input.classList.add('valid');
      input.classList.remove('invalid');
      errorDiv.classList.remove('show');
      if (successDiv) successDiv.classList.add('show');
    }

    function limparFeedback(inputId) {
      const input = document.getElementById(inputId);
      const errorDiv = document.getElementById(inputId + 'Error');
      const successDiv = document.getElementById(inputId + 'Success');
      
      input.classList.remove('valid', 'invalid');
      if (errorDiv) errorDiv.classList.remove('show');
      if (successDiv) successDiv.classList.remove('show');
    }

    // ==================== BUSCAR CEP ====================
    async function buscarCEP(cepId, tipo) {
      const cepInput = document.getElementById(cepId);
      const cepNumeros = cepInput.value.replace(/\D/g, '');

      if (!validarCEP(cepInput.value)) {
        limparFeedback(cepId);
        return;
      }

      const loadingDiv = document.getElementById(cepId + 'Loading');
      loadingDiv.classList.add('show');

      try {
        const response = await fetch(`https://viacep.com.br/ws/${cepNumeros}/json/`);
        const data = await response.json();

        if (data.erro) {
          mostrarErro(cepId, 'CEP n√£o encontrado');
          limparCamposCEP(tipo);
        } else {
          mostrarSucesso(cepId);
          preencherCamposCEP(data, tipo);
        }
      } catch (error) {
        mostrarErro(cepId, 'Erro ao buscar CEP');
        console.error(error);
      } finally {
        loadingDiv.classList.remove('show');
      }
    }

    function preencherCamposCEP(data, tipo) {
      const sufixo = tipo === 'fisica' ? 'Fisica' : 'Juridica';
      document.getElementById('logradouro' + sufixo).value = data.logradouro || '';
      document.getElementById('bairro' + sufixo).value = data.bairro || '';
      document.getElementById('cidade' + sufixo).value = data.localidade || '';
      document.getElementById('estado' + sufixo).value = data.uf || '';
    }

    function limparCamposCEP(tipo) {
      const sufixo = tipo === 'fisica' ? 'Fisica' : 'Juridica';
      document.getElementById('logradouro' + sufixo).value = '';
      document.getElementById('bairro' + sufixo).value = '';
      document.getElementById('cidade' + sufixo).value = '';
      document.getElementById('estado' + sufixo).value = '';
    }

    // ==================== VALIDAR FORMUL√ÅRIO ====================
    function validarFormulario(tipo) {
      const sufixo = tipo === 'fisica' ? 'Fisica' : 'Juridica';
      let valido = true;

      // CPF/CNPJ
      const documentoId = tipo === 'fisica' ? 'cpf' + sufixo : 'cnpj' + sufixo;
      const documentoInput = document.getElementById(documentoId);
      const validador = tipo === 'fisica' ? validarCPF : validarCNPJ;

      if (!validador(documentoInput.value)) {
        valido = false;
      }

      // Email
      const emailInput = document.getElementById('email' + sufixo);
      if (!validarEmail(emailInput.value)) {
        valido = false;
      }

      // Telefone Principal
      const telefoneInput = document.getElementById('telefonePrincipal' + sufixo);
      if (!validarTelefone(telefoneInput.value)) {
        valido = false;
      }

      // CEP
      const cepInput = document.getElementById('cep' + sufixo);
      if (!validarCEP(cepInput.value)) {
        valido = false;
      }

      // Campos obrigat√≥rios
      const form = tipo === 'fisica' ? document.getElementById('formFisica') : document.getElementById('formJuridica');
      const inputs = form.querySelectorAll('input[required]');
      inputs.forEach(input => {
        if (!input.value.trim()) {
          valido = false;
        }
      });

      return valido;
    }

    // ==================== EVENT LISTENERS ====================
    document.getElementById('cpfFisica').addEventListener('input', function(e) {
      e.target.value = mascaraCPF(e.target.value);
      if (validarCPF(e.target.value)) {
        mostrarSucesso('cpfFisica');
      } else {
        limparFeedback('cpfFisica');
      }
    });

    document.getElementById('cnpjJuridica').addEventListener('input', function(e) {
      e.target.value = mascaraCNPJ(e.target.value);
      if (validarCNPJ(e.target.value)) {
        mostrarSucesso('cnpjJuridica');
      } else {
        limparFeedback('cnpjJuridica');
      }
    });

    document.getElementById('cepFisica').addEventListener('blur', () => buscarCEP('cepFisica', 'fisica'));
    document.getElementById('cepFisica').addEventListener('input', function(e) {
      e.target.value = mascaraCEP(e.target.value);
    });

    document.getElementById('cepJuridica').addEventListener('blur', () => buscarCEP('cepJuridica', 'juridica'));
    document.getElementById('cepJuridica').addEventListener('input', function(e) {
      e.target.value = mascaraCEP(e.target.value);
    });

    document.getElementById('emailFisica').addEventListener('input', function() {
      if (validarEmail(this.value)) {
        mostrarSucesso('emailFisica');
      } else {
        limparFeedback('emailFisica');
      }
    });

    document.getElementById('emailJuridica').addEventListener('input', function() {
      if (validarEmail(this.value)) {
        mostrarSucesso('emailJuridica');
      } else {
        limparFeedback('emailJuridica');
      }
    });

    document.getElementById('telefonePrincipalFisica').addEventListener('input', function(e) {
      e.target.value = mascaraTelefone(e.target.value);
      if (validarTelefone(e.target.value)) {
        mostrarSucesso('telefonePrincipalFisica');
      } else {
        limparFeedback('telefonePrincipalFisica');
      }
    });

    document.getElementById('telefonePrincipalJuridica').addEventListener('input', function(e) {
      e.target.value = mascaraTelefone(e.target.value);
      if (validarTelefone(e.target.value)) {
        mostrarSucesso('telefonePrincipalJuridica');
      } else {
        limparFeedback('telefonePrincipalJuridica');
      }
    });

    document.getElementById('telefoneSecundarioFisica').addEventListener('input', function(e) {
      e.target.value = mascaraTelefone(e.target.value);
      if (this.value && !validarTelefone(this.value)) {
        mostrarErro('telefoneSecundarioFisica', 'Telefone inv√°lido');
      } else {
        limparFeedback('telefoneSecundarioFisica');
      }
    });

    document.getElementById('telefoneSecundarioJuridica').addEventListener('input', function(e) {
      e.target.value = mascaraTelefone(e.target.value);
      if (this.value && !validarTelefone(this.value)) {
        mostrarErro('telefoneSecundarioJuridica', 'Telefone inv√°lido');
      } else {
        limparFeedback('telefoneSecundarioJuridica');
      }
    });

    document.getElementById('dataNascimentoFisica').addEventListener('change', function() {
      if (!validarData(this.value)) {
        mostrarErro('dataNascimentoFisica', 'Data n√£o pode ser futura');
      } else {
        mostrarSucesso('dataNascimentoFisica');
      }
    });

    document.getElementById('dataAberturaJuridica').addEventListener('change', function() {
      if (!validarData(this.value)) {
        mostrarErro('dataAberturaJuridica', 'Data n√£o pode ser futura');
      } else {
        mostrarSucesso('dataAberturaJuridica');
      }
    });

    document.getElementById('siteJuridica').addEventListener('input', function() {
      if (this.value && !this.value.match(/^https?:\/\/.+/)) {
        mostrarErro('siteJuridica', 'URL deve come√ßar com http:// ou https://');
      } else {
        limparFeedback('siteJuridica');
      }
    });

    ['nomeFisica', 'logradouroFisica', 'numeroFisica', 'bairroFisica', 'cidadeFisica', 'estadoFisica'].forEach(id => {
      document.getElementById(id).addEventListener('change', () => {});
    });

    ['razaoSocialJuridica', 'logradouroJuridica', 'numeroJuridica', 'bairroJuridica', 'cidadeJuridica', 'estadoJuridica'].forEach(id => {
      document.getElementById(id).addEventListener('change', () => {});
    });

    // ==================== ABAS ====================
    const btnFisica = document.getElementById('btnFisica');
    const btnJuridica = document.getElementById('btnJuridica');
    const formFisica = document.getElementById('formFisica');
    const formJuridica = document.getElementById('formJuridica');

    btnFisica.addEventListener('click', () => {
      btnFisica.classList.add('active');
      btnJuridica.classList.remove('active');
      formFisica.classList.add('active');
      formJuridica.classList.remove('active');
    });

    btnJuridica.addEventListener('click', () => {
      btnJuridica.classList.add('active');
      btnFisica.classList.remove('active');
      formJuridica.classList.add('active');
      formFisica.classList.remove('active');
    });
  </script>
</body>
</html>


